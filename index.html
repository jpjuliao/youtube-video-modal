<!DOCTYPE html>
<html>
	<head></head>
	<body>
		<div class="youtube-video">
			<a href="#" data-trigger="modal" data-modal="#modal1"></a>
			<iframe src="M7lc1UVf-VE"></iframe>
		</div>
		<div class="youtube-video">
			<a href="#" data-trigger="modal" data-modal="#modal2"></a>
			<iframe src="M7lc1UVf-VE"></iframe>
		</div>
		<div class="youtube-video">
			<a href="#" data-trigger="modal" data-modal="#modal3"></a>
			<iframe src="M7lc1UVf-VE"></iframe>
		</div>
		<div class="modal" id="modal1">
			<div id="modal-player1"></div>
		</div>
		<div class="modal" id="modal2">
			<div id="modal-player2"></div>
		</div>
		<div class="modal" id="modal3">
			<div id="modal-player3"></div>
		</div>
		<script>
            
        document.addEventListener('DOMContentLoaded', (event) => {
          "use strict";
  
          let tag = document.createElement('script');
              tag.src = "https://www.youtube.com/iframe_api",
              firstScriptTag = document.getElementsByTagName('script')[0];
              player;
              
          firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
    
          function onYouTubeIframeAPIReady() {
            
            $('#modal1').on('bs.modal.shown', function(){
                
                player = new YT.Player('modal-player1', {
                  height: '390',
                  width: '640',
                  videoId: 'M7lc1UVf-VE',
                  events: {
                    'onReady': onPlayerReady,
                    'onStateChange': onPlayerStateChange
                  }
                });
        
            });      
            
            $('#modal2').on('bs.modal.shown', function(){
                
                player = new YT.Player('modal-player2', {
                  height: '390',
                  width: '640',
                  videoId: 'M7lc1UVf-VE',
                  events: {
                    'onReady': onPlayerReady,
                    'onStateChange': onPlayerStateChange
                  }
                });
        
            });      
            
            $('#modal3').on('bs.modal.shown', function(){
                
                player = new YT.Player('modal-player3', {
                  height: '390',
                  width: '640',
                  videoId: 'M7lc1UVf-VE',
                  events: {
                    'onReady': onPlayerReady,
                    'onStateChange': onPlayerStateChange
                  }
                });
        
            });   
            
          } 
    
          function onPlayerReady(event) {
            event.target.playVideo();
          }
    
          function onPlayerStateChange(event) {
              
            if (event.data == YT.PlayerState.PAUSED) {
              event.parentNode.classList.add("paused");
            }
            
            if (event.data == YT.PlayerState.ENDED) {
              event.parentNode.classList.add("ended");
            }
            
            if (event.data == YT.PlayerState.PLAYING) {
              event.parentNode.classList.remove("paused", "ended");
            }
            
          }
          
        });
  
		</script>
	</body>
</html>